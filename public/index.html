<!DOCTYPE html>
<html>
  <head>
    <title>Teacher Registry Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      h1 {
        color: #333;
      }
      button {
        background-color: #4caf50;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 10px 2px;
        cursor: pointer;
        border-radius: 4px;
      }
      .test-container {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .result {
        margin-top: 10px;
        padding: 10px;
        border-left: 4px solid #2196f3;
        background-color: #f5f5f5;
      }
      .error {
        border-left: 4px solid #f44336;
      }
      .success {
        border-left: 4px solid #4caf50;
      }
    </style>
  </head>
  <body>
    <h1>Teacher Registry API Test</h1>
    <p>This page tests if your Teacher Registry API is working correctly.</p>

    <div class="test-container">
      <h3>Test 1: API Root</h3>
      <button onclick="testAPIRoot()">Test API Root</button>
      <div id="result-root" class="result"></div>
    </div>

    <div class="test-container">
      <h3>Test 2: Teachers List</h3>
      <button onclick="testTeachersList()">Get Teachers List</button>
      <div id="result-teachers" class="result"></div>
    </div>

    <div class="test-container">
      <h3>Test 3: Register Teacher</h3>
      <button onclick="registerTeacher()">Register Test Teacher</button>
      <div id="result-register" class="result"></div>
    </div>

    <div class="test-container">
      <h3>Test 4: Get Specific Teacher</h3>
      <button onclick="getTeacher()">Get Test Teacher</button>
      <div id="result-teacher" class="result"></div>
    </div>

    <div class="test-container">
      <h3>Health Check</h3>
      <button onclick="healthCheck()">Health Check</button>
      <div id="result-health" class="result"></div>
    </div>

    <h2>Connection Information</h2>
    <div id="connection-info" class="result"></div>

    <script>
      // Display connection information
      document.getElementById("connection-info").innerHTML = `
            <p><strong>Current URL:</strong> ${window.location.href}</p>
            <p><strong>Host:</strong> ${window.location.host}</p>
            <p><strong>Protocol:</strong> ${window.location.protocol}</p>
        `;

      function testAPIRoot() {
        const resultElement = document.getElementById("result-root");
        resultElement.innerHTML = "Testing...";
        resultElement.className = "result";

        fetch("/api")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            resultElement.innerHTML = `<pre>${JSON.stringify(
              data,
              null,
              2
            )}</pre>`;
            resultElement.className = "result success";
          })
          .catch((err) => {
            resultElement.innerHTML = `Error: ${err.message}`;
            resultElement.className = "result error";
          });
      }

      function testTeachersList() {
        const resultElement = document.getElementById("result-teachers");
        resultElement.innerHTML = "Testing...";
        resultElement.className = "result";

        fetch("/api/teachers")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            resultElement.innerHTML = `<pre>${JSON.stringify(
              data,
              null,
              2
            )}</pre>`;
            resultElement.className = "result success";
          })
          .catch((err) => {
            resultElement.innerHTML = `Error: ${err.message}`;
            resultElement.className = "result error";
          });
      }

      function registerTeacher() {
        const resultElement = document.getElementById("result-register");
        resultElement.innerHTML = "Testing...";
        resultElement.className = "result";

        fetch("/api/register", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            teacher_id: "test_teacher",
            ip_address: "192.168.1.123",
            port: 8080,
          }),
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            resultElement.innerHTML = `<pre>${JSON.stringify(
              data,
              null,
              2
            )}</pre>`;
            resultElement.className = "result success";
          })
          .catch((err) => {
            resultElement.innerHTML = `Error: ${err.message}`;
            resultElement.className = "result error";
          });
      }

      function getTeacher() {
        const resultElement = document.getElementById("result-teacher");
        resultElement.innerHTML = "Testing...";
        resultElement.className = "result";

        fetch("/api/teacher/test_teacher")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            resultElement.innerHTML = `<pre>${JSON.stringify(
              data,
              null,
              2
            )}</pre>`;
            resultElement.className = "result success";
          })
          .catch((err) => {
            resultElement.innerHTML = `Error: ${err.message}`;
            resultElement.className = "result error";
          });
      }

      function healthCheck() {
        const resultElement = document.getElementById("result-health");
        resultElement.innerHTML = "Testing...";
        resultElement.className = "result";

        fetch("/api/health")
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            resultElement.innerHTML = `<pre>${JSON.stringify(
              data,
              null,
              2
            )}</pre>`;
            resultElement.className = "result success";
          })
          .catch((err) => {
            resultElement.innerHTML = `Error: ${err.message}`;
            resultElement.className = "result error";
          });
      }
    </script>
  </body>
</html>
